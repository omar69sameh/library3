<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive 3D Book</title>
    <style>
        /* ========================================
           GLOBAL RESET & BASE STYLES
        ======================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            overflow: hidden;
            background: linear-gradient(135deg, #2c1810 0%, #1a0f08 100%);
            cursor: none;
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        /* ========================================
           CUSTOM PENCIL CURSOR
           Replaces default cursor with pencil graphic
        ======================================== */
        #cursor {
            position: fixed;
            width: 40px;
            height: 40px;
            pointer-events: none;
            z-index: 10000;
            transform: translate(-50%, -50%) rotate(-45deg);
            transition: transform 0.1s ease;
        }

        #cursor img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        /* ========================================
           WOODEN TABLE BACKGROUND
           Creates realistic wood texture and grain
        ======================================== */
        .table-surface {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(90deg, rgba(101,67,33,0.1) 1px, transparent 1px),
                linear-gradient(rgba(101,67,33,0.1) 1px, transparent 1px),
                linear-gradient(135deg, #8B4513 0%, #654321 50%, #5C4033 100%);
            background-size: 120px 120px, 120px 120px, 100% 100%;
            box-shadow: inset 0 0 100px rgba(0,0,0,0.5);
        }

        /* Wood grain noise overlay */
        .table-surface::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                repeating-linear-gradient(90deg, 
                    transparent, 
                    transparent 2px, 
                    rgba(0,0,0,0.03) 2px, 
                    rgba(0,0,0,0.03) 4px);
            opacity: 0.6;
        }

        /* ========================================
           MAIN BOOK CONTAINER
           3D perspective container for book
        ======================================== */
        .book-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            perspective: 2000px;
            perspective-origin: 50% 50%;
            width: 900px;
            height: 600px;
            transition: transform 0.3s ease;
        }

        /* ========================================
           3D BOOK WRAPPER
           Main book element with 3D transforms
        ======================================== */
        .book {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transform: rotateX(10deg) rotateY(0deg) rotateZ(0deg);
            transition: transform 0.3s ease;
            animation: breathe 4s ease-in-out infinite;
        }

        /* Idle breathing animation for book */
        @keyframes breathe {
            0%, 100% { transform: rotateX(10deg) translateY(0px) scale(1); }
            50% { transform: rotateX(10deg) translateY(-5px) scale(1.005); }
        }

        /* ========================================
           BOOK BASE & SPINE
           Creates book structure with thickness
        ======================================== */
        .book-base {
            position: absolute;
            width: 100%;
            height: 100%;
            background: #f4e8d8;
            border-radius: 4px;
            box-shadow: 
                0 20px 60px rgba(0,0,0,0.6),
                inset 0 0 20px rgba(0,0,0,0.1),
                inset 2px 0 5px rgba(0,0,0,0.2);
        }

        /* Book spine shadow and depth */
        .book-base::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            width: 20px;
            height: 100%;
            background: linear-gradient(90deg, 
                rgba(0,0,0,0.3) 0%, 
                rgba(0,0,0,0.1) 50%, 
                transparent 100%);
            transform: translateX(-50%);
            border-radius: 2px;
        }

        /* Visible page edges on sides */
        .book-base::after {
            content: '';
            position: absolute;
            right: 0;
            top: 5px;
            width: 8px;
            height: calc(100% - 10px);
            background: repeating-linear-gradient(
                0deg,
                #fff 0px,
                #f9f9f9 1px,
                #f0f0f0 2px,
                #fff 3px
            );
            box-shadow: -2px 0 5px rgba(0,0,0,0.2);
        }

        /* ========================================
           PAGE SPREADS CONTAINER
           Holds all book spreads
        ======================================== */
        .pages-container {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
        }

        /* ========================================
           INDIVIDUAL PAGE SPREAD
           Each spread is a double-page layout
        ======================================== */
        .page-spread {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .page-spread.active {
            opacity: 1;
            pointer-events: auto;
            z-index: 1;
        }

        /* Left page of spread */
        .page-left,
        .page-right {
            position: absolute;
            width: 50%;
            height: 100%;
            background: 
                radial-gradient(ellipse at center, rgba(255,255,255,0.1) 0%, transparent 70%),
                linear-gradient(135deg, #fdfbf7 0%, #f9f6f0 100%);
            padding: 60px 50px;
            overflow: hidden;
            box-shadow: inset 0 0 30px rgba(0,0,0,0.05);
        }

        .page-left {
            left: 0;
            border-right: 1px solid rgba(0,0,0,0.1);
            background-image: 
                radial-gradient(ellipse at 100% 50%, rgba(0,0,0,0.15) 0%, transparent 50%),
                linear-gradient(135deg, #fdfbf7 0%, #f9f6f0 100%);
        }

        .page-right {
            right: 0;
            border-left: 1px solid rgba(0,0,0,0.1);
            background-image: 
                radial-gradient(ellipse at 0% 50%, rgba(0,0,0,0.15) 0%, transparent 50%),
                linear-gradient(135deg, #f9f6f0 0%, #fdfbf7 100%);
        }

        /* Paper texture overlay */
        .page-left::before,
        .page-right::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.01) 2px, rgba(0,0,0,0.01) 4px),
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,0.01) 2px, rgba(0,0,0,0.01) 4px);
            pointer-events: none;
        }

        /* ========================================
           PAGE CONTENT TYPOGRAPHY
        ======================================== */
        .page-content h1 {
            font-size: 48px;
            color: #2c1810;
            margin-bottom: 20px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .page-content h2 {
            font-size: 32px;
            color: #3d2415;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .page-content h3 {
            font-size: 24px;
            color: #4a2f1a;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .page-content p {
            font-size: 16px;
            line-height: 1.8;
            color: #3d2415;
            margin-bottom: 15px;
        }

        .page-content ul {
            list-style: none;
            padding-left: 0;
        }

        .page-content li {
            font-size: 15px;
            color: #4a2f1a;
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }

        .page-content li::before {
            content: '•';
            position: absolute;
            left: 0;
            color: #8B4513;
        }

        /* ========================================
           GALLERY GRID LAYOUT
        ======================================== */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .gallery-item {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #e8d5c0 0%, #d4bfa8 100%);
            border-radius: 4px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #5c4033;
        }

        /* ========================================
           CATEGORY CARDS
        ======================================== */
        .categories {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .category-card {
            background: rgba(139, 69, 19, 0.1);
            padding: 15px 20px;
            border-radius: 6px;
            border-left: 4px solid #8B4513;
        }

        .category-card h4 {
            font-size: 18px;
            color: #2c1810;
            margin-bottom: 5px;
        }

        .category-card p {
            font-size: 14px;
            margin: 0;
        }

        /* ========================================
           FEATURES LIST
        ======================================== */
        .features-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }

        .feature-item {
            display: flex;
            align-items: start;
            gap: 15px;
        }

        .feature-icon {
            width: 40px;
            height: 40px;
            background: #8B4513;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            flex-shrink: 0;
        }

        .feature-text h4 {
            font-size: 18px;
            color: #2c1810;
            margin-bottom: 5px;
        }

        .feature-text p {
            font-size: 14px;
            margin: 0;
        }

        /* ========================================
           CONTACT FORM
        ======================================== */
        .contact-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .contact-form input,
        .contact-form textarea {
            padding: 12px;
            border: 2px solid #d4bfa8;
            border-radius: 4px;
            font-family: Georgia, serif;
            font-size: 14px;
            background: rgba(255,255,255,0.5);
            cursor: none;
        }

        .contact-form input:focus,
        .contact-form textarea:focus {
            outline: none;
            border-color: #8B4513;
        }

        .contact-form button {
            padding: 12px 24px;
            background: #8B4513;
            color: white;
            border: none;
            border-radius: 4px;
            font-family: Georgia, serif;
            font-size: 16px;
            cursor: none;
            transition: background 0.3s;
        }

        .contact-form button:hover {
            background: #6d3410;
        }

        /* ========================================
           NAVIGATION CONTROLS
           Arrows for page navigation
        ======================================== */
        .nav-arrow {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background: rgba(139, 69, 19, 0.8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: none;
            transition: all 0.3s;
            z-index: 100;
            opacity: 0.7;
        }

        .nav-arrow:hover {
            opacity: 1;
            transform: translateY(-50%) scale(1.1);
        }

        .nav-arrow.left {
            left: 30px;
        }

        .nav-arrow.right {
            right: 30px;
        }

        .nav-arrow.disabled {
            opacity: 0.2;
            pointer-events: none;
        }

        /* ========================================
           PAGE INDICATOR DOTS
        ======================================== */
        .page-indicator {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 100;
        }

        .indicator-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(139, 69, 19, 0.3);
            cursor: none;
            transition: all 0.3s;
        }

        .indicator-dot.active {
            background: #8B4513;
            transform: scale(1.3);
        }

        /* ========================================
           PAGE FLIP ANIMATION
           Animating page element during flip
        ======================================== */
        .flipping-page {
            position: absolute;
            top: 0;
            left: 50%;
            width: 50%;
            height: 100%;
            background: linear-gradient(135deg, #fdfbf7 0%, #f9f6f0 100%);
            transform-origin: left center;
            transform-style: preserve-3d;
            backface-visibility: hidden;
            pointer-events: none;
            box-shadow: -5px 0 20px rgba(0,0,0,0.3);
            z-index: 10;
        }

        /* Back side of flipping page */
        .flipping-page::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f9f6f0 0%, #fdfbf7 100%);
            transform: rotateY(180deg);
            backface-visibility: hidden;
        }

        /* ========================================
           RESPONSIVE: MOBILE LAYOUT
           Keep book visualization with swipe navigation
        ======================================== */
        @media (max-width: 900px) {
            body {
                overflow: hidden;
            }

            .book-container {
                width: 90vw;
                height: 70vh;
                max-width: 100%;
            }

            .book {
                height: 100%;
                animation: none;
            }

            /* Tighter pages and smaller text on mobile */
            .page-left,
            .page-right {
                padding: 30px 20px;
                width: 100%;
                left: 0;
                right: auto;
                border: none;
            }

            /* Mobile: show only one page per spread to avoid cramped layout */
            .page-right {
                display: none;
            }

            .page-content h1 {
                font-size: 32px;
            }

            .page-content h2 {
                font-size: 24px;
            }

            .page-content h3 {
                font-size: 20px;
            }

            .page-content p,
            .page-content li {
                font-size: 14px;
            }

            /* Hide custom cursor on mobile, keep system cursor */
            #cursor {
                display: none;
            }

            body {
                cursor: auto;
            }

            .contact-form input,
            .contact-form textarea,
            .contact-form button {
                cursor: pointer;
            }

            /* Hide desktop navigation controls on mobile */
            .nav-arrow,
            .page-indicator {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Custom pencil cursor -->
    <div id="cursor">
        <img src="pen.png" alt="Pen cursor" style="width: 100%; height: 100%; object-fit: contain;">
    </div>

    <!-- Wooden table surface -->
    <div class="table-surface"></div>

    <!-- Main book container -->
    <div class="book-container">
        <div class="book">
            <div class="book-base"></div>
            
            <!-- Pages container -->
            <div class="pages-container">
                <!-- Spread 1: Hero + About -->
                <div class="page-spread active" data-page="0">
                    <div class="page-left">
                        <div class="page-content">
                            <h1>Welcome</h1>
                            <p>Discover a world of creativity and innovation through our interactive experience. Turn the pages to explore our story.</p>
                            <p>This immersive journey combines cutting-edge technology with timeless design principles.</p>
                        </div>
                    </div>
                    <div class="page-right">
                        <div class="page-content">
                            <h2>About Us</h2>
                            <p>We are passionate creators dedicated to crafting exceptional digital experiences that blend artistry with functionality.</p>
                            <p>Our team believes in pushing boundaries and exploring new possibilities in web design and interactive media.</p>
                            <p>Every project is an opportunity to tell a unique story and create lasting impressions.</p>
                        </div>
                    </div>
                </div>

                <!-- Spread 2: Categories + Gallery -->
                <div class="page-spread" data-page="1">
                    <div class="page-left">
                        <div class="page-content">
                            <h2>Categories</h2>
                            <div class="categories">
                                <div class="category-card">
                                    <h4>Design</h4>
                                    <p>Innovative visual solutions</p>
                                </div>
                                <div class="category-card">
                                    <h4>Development</h4>
                                    <p>Cutting-edge technology</p>
                                </div>
                                <div class="category-card">
                                    <h4>Strategy</h4>
                                    <p>Data-driven insights</p>
                                </div>
                                <div class="category-card">
                                    <h4>Creative</h4>
                                    <p>Bold artistic direction</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="page-right">
                        <div class="page-content">
                            <h2>Gallery</h2>
                            <div class="gallery-grid">
                                <div class="gallery-item">Project 1</div>
                                <div class="gallery-item">Project 2</div>
                                <div class="gallery-item">Project 3</div>
                                <div class="gallery-item">Project 4</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Spread 3: Key Features -->
                <div class="page-spread" data-page="2">
                    <div class="page-left">
                        <div class="page-content">
                            <h2>Key Features</h2>
                            <div class="features-list">
                                <div class="feature-item">
                                    <div class="feature-icon">1</div>
                                    <div class="feature-text">
                                        <h4>3D Interaction</h4>
                                        <p>Immersive spatial experiences</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <div class="feature-icon">2</div>
                                    <div class="feature-text">
                                        <h4>Responsive Design</h4>
                                        <p>Seamless across all devices</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <div class="feature-icon">3</div>
                                    <div class="feature-text">
                                        <h4>Performance</h4>
                                        <p>Optimized for speed</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="page-right">
                        <div class="page-content">
                            <h3>What Sets Us Apart</h3>
                            <p>Our commitment to excellence drives every decision we make. We combine technical expertise with creative vision to deliver outstanding results.</p>
                            <p>From concept to completion, we ensure every detail receives the attention it deserves.</p>
                            <ul>
                                <li>Award-winning team</li>
                                <li>Proven track record</li>
                                <li>Client-focused approach</li>
                                <li>Innovative solutions</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Spread 4: Contact -->
                <div class="page-spread" data-page="3">
                    <div class="page-left">
                        <div class="page-content">
                            <h2>Get In Touch</h2>
                            <p>Ready to start your next project? We'd love to hear from you.</p>
                            <p><strong>Email:</strong> hello@example.com</p>
                            <p><strong>Phone:</strong> +1 (555) 123-4567</p>
                            <p><strong>Address:</strong> 123 Creative Street, Design City, DC 12345</p>
                        </div>
                    </div>
                    <div class="page-right">
                        <div class="page-content">
                            <h3>Contact Form</h3>
                            <div class="contact-form">
                                <input type="text" placeholder="Your Name">
                                <input type="email" placeholder="Your Email">
                                <textarea rows="4" placeholder="Your Message"></textarea>
                                <button>Send Message</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Animated flipping page element -->
            <div class="flipping-page" style="display: none;"></div>
        </div>
    </div>

    <!-- Navigation arrows -->
    <div class="nav-arrow left disabled">‹</div>
    <div class="nav-arrow right">›</div>

    <!-- Page indicator dots -->
    <div class="page-indicator">
        <div class="indicator-dot active"></div>
        <div class="indicator-dot"></div>
        <div class="indicator-dot"></div>
        <div class="indicator-dot"></div>
    </div>

    <script>
        /* ========================================
           INITIALIZATION & STATE MANAGEMENT
        ======================================== */
        
        // Current page tracking
        let currentPage = 0;
        const totalPages = 4;
        
        // Animation state flags
        let isFlipping = false;
        let isDragging = false;
        let startX = 0;
        let currentX = 0;
        
        // DOM element references
        const book = document.querySelector('.book');
        const bookContainer = document.querySelector('.book-container');
        const spreads = document.querySelectorAll('.page-spread');
        const leftArrow = document.querySelector('.nav-arrow.left');
        const rightArrow = document.querySelector('.nav-arrow.right');
        const indicators = document.querySelectorAll('.indicator-dot');
        const flippingPage = document.querySelector('.flipping-page');
        const cursor = document.getElementById('cursor');

        /* ========================================
           CUSTOM CURSOR TRACKING
           Updates pencil cursor position
        ======================================== */
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });

        /* ========================================
           PARALLAX EFFECT ON MOUSE MOVE
           Book tilts based on mouse position
        ======================================== */
        document.addEventListener('mousemove', (e) => {
            if (window.innerWidth <= 768) return;
            
            const rect = bookContainer.getBoundingClientRect();
            const x = (e.clientX - rect.left) / rect.width;
            const y = (e.clientY - rect.top) / rect.height;
            
            // Calculate rotation based on mouse position
            const rotateY = (x - 0.5) * 15; // -7.5 to 7.5 degrees
            const rotateX = (y - 0.5) * -10; // -5 to 5 degrees
            
            book.style.transform = `rotateX(${10 + rotateX}deg) rotateY(${rotateY}deg)`;
        });

        /* ========================================
           PAGE FLIP ANIMATION FUNCTION
           Creates realistic page turn effect
        ======================================== */
        function flipPage(direction) {
            if (isFlipping) return;

            // Calculate target page
            const targetPage = direction === 'next' ? currentPage + 1 : currentPage - 1;

            // Validate page bounds
            if (targetPage < 0 || targetPage >= totalPages) return;

            isFlipping = true;

            // Prepare flipping-page side and origin based on direction
            if (direction === 'next') {
                // Flipping the right page to the left
                flippingPage.style.left = '50%';
                flippingPage.style.transformOrigin = 'left center';
            } else {
                // Flipping the left page to the right
                flippingPage.style.left = '0';
                flippingPage.style.transformOrigin = 'right center';
            }

            flippingPage.style.display = 'block';
            flippingPage.style.transform = 'rotateY(0deg)';

            // Animate page flip with realistic rotation
            const startRotation = 0;
            const endRotation = direction === 'next' ? -180 : 180;

            const duration = 900; // milliseconds - natural, slightly faster
            const startTime = performance.now();

            function animate(now) {
                const elapsed = now - startTime;
                const progress = Math.min(elapsed / duration, 1);

                // Easing function for natural motion
                const eased = easeInOutCubic(progress);
                const rotation = startRotation + (endRotation - startRotation) * eased;

                // Apply 3D rotation to flipping page
                flippingPage.style.transform = `rotateY(${rotation}deg)`;

                // Add curved deformation effect
                const curve = Math.sin(progress * Math.PI) * 20;
                const shadowOffset = 5 + curve;
                const shadowBlur = 20 + curve;
                const shadowAlpha = 0.3 + progress * 0.2;
                const shadowSign = direction === 'next' ? '-' : '';
                flippingPage.style.boxShadow = `
                    ${shadowSign}${shadowOffset}px 0 ${shadowBlur}px rgba(0,0,0,${shadowAlpha})
                `;

                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    // Animation complete: now switch the actual content
                    updatePage(targetPage);
                    flippingPage.style.display = 'none';
                    flippingPage.style.transform = 'rotateY(0deg)';
                    isFlipping = false;
                }
            }

            requestAnimationFrame(animate);
        }

        /* ========================================
           EASING FUNCTION
           Smooth acceleration/deceleration
        ======================================== */
        function easeInOutCubic(t) {
            return t < 0.5 
                ? 4 * t * t * t 
                : 1 - Math.pow(-2 * t + 2, 3) / 2;
        }

        /* ========================================
           UPDATE PAGE DISPLAY
           Switches active spread and updates UI
        ======================================== */
        function updatePage(newPage) {
            currentPage = newPage;
            
            // Update spread visibility
            spreads.forEach((spread, index) => {
                spread.classList.toggle('active', index === currentPage);
            });
            
            // Update navigation arrows
            leftArrow.classList.toggle('disabled', currentPage === 0);
            rightArrow.classList.toggle('disabled', currentPage === totalPages - 1);
            
            // Update indicator dots
            indicators.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentPage);
            });
        }

        /* ========================================
           NAVIGATION EVENT LISTENERS
           Arrow clicks and keyboard controls
        ======================================== */
        leftArrow.addEventListener('click', () => {
            if (isFlipping) return;
            flipPage('prev');
        });

        rightArrow.addEventListener('click', () => {
            if (isFlipping) return;
            flipPage('next');
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (isFlipping) return;
            if (e.key === 'ArrowLeft') {
                flipPage('prev');
            } else if (e.key === 'ArrowRight') {
                flipPage('next');
            }
        });

        /* ========================================
           INDICATOR DOT NAVIGATION
           Click dots to jump to specific page
        ======================================== */
        indicators.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                if (index !== currentPage && !isFlipping) {
                    const direction = index > currentPage ? 'next' : 'prev';
                    flipPage(direction);
                }
            });
        });

        /* ========================================
           VERTICAL SCROLL DETECTION
           Normal scroll down = next page (right to left flip)
           Normal scroll up = previous page (left to right flip)
        ======================================== */
        let scrollTimeout;
        let lastScrollDelta = 0;

        // Mouse wheel vertical scroll
        document.addEventListener('wheel', (e) => {
            if (window.innerWidth <= 768 || isFlipping) return;
            
            e.preventDefault();
            
            clearTimeout(scrollTimeout);
            lastScrollDelta += e.deltaY;
            
            // Debounce scroll events for smoother experience
            scrollTimeout = setTimeout(() => {
                // Scroll down (positive deltaY) = next page
                if (lastScrollDelta > 30 && currentPage < totalPages - 1) {
                    flipPage('next');
                } 
                // Scroll up (negative deltaY) = previous page
                else if (lastScrollDelta < -30 && currentPage > 0) {
                    flipPage('prev');
                }
                lastScrollDelta = 0;
            }, 50);
        }, { passive: false });

        /* ========================================
           DRAG TO FLIP FUNCTIONALITY
           Mouse/touch drag to turn pages
        ======================================== */
        bookContainer.addEventListener('mousedown', (e) => {
            if (window.innerWidth <= 768 || isFlipping) return;
            isDragging = true;
            startX = e.clientX;
            bookContainer.style.cursor = 'grabbing';
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            currentX = e.clientX;
            const deltaX = currentX - startX;
            
            // Visual feedback during drag
            if (Math.abs(deltaX) > 20) {
                const direction = deltaX > 0 ? 1 : -1;
                book.style.transform = `
                    rotateX(10deg) 
                    rotateY(${direction * Math.min(Math.abs(deltaX) / 20, 5)}deg)
                `;
            }
        });

        document.addEventListener('mouseup', (e) => {
            if (!isDragging) return;
            
            const deltaX = currentX - startX;
            
            // Threshold for page flip: 100px drag
            if (deltaX > 100 && currentPage > 0) {
                flipPage('prev');
            } else if (deltaX < -100 && currentPage < totalPages - 1) {
                flipPage('next');
            }
            
            // Reset drag state
            isDragging = false;
            startX = 0;
            currentX = 0;
            bookContainer.style.cursor = 'grab';
            
            // Reset book rotation
            setTimeout(() => {
                book.style.transform = 'rotateX(10deg) rotateY(0deg)';
            }, 100);
        });

        /* ========================================
           TOUCH EVENTS FOR MOBILE
           Swipe gesture support
        ======================================== */
        let touchStartX = 0;
        let touchEndX = 0;

        bookContainer.addEventListener('touchstart', (e) => {
            if (isFlipping) return;
            touchStartX = e.changedTouches[0].screenX;
        });

        bookContainer.addEventListener('touchend', (e) => {
            if (isFlipping) return;
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (diff > swipeThreshold) {
                // Swipe left - next page
                flipPage('next');
            } else if (diff < -swipeThreshold) {
                // Swipe right - previous page
                flipPage('prev');
            }
        }

        /* ========================================
           RESPONSIVE BEHAVIOR
           Disable 3D effects on mobile
        ======================================== */
        function checkResponsive() {
            if (window.innerWidth <= 768) {
                // Mobile: keep book view, but disable idle breathing animation
                book.style.transform = 'rotateX(10deg) rotateY(0deg)';
                book.style.animation = 'none';

                // On mobile still show only the current spread
                spreads.forEach((spread, index) => {
                    spread.classList.toggle('active', index === currentPage);
                });
            } else {
                // Desktop: enable animations
                book.style.animation = 'breathe 4s ease-in-out infinite';
                updatePage(currentPage);
            }
        }

        // Check on load and resize
        checkResponsive();
        window.addEventListener('resize', checkResponsive);

        /* ========================================
           HOVER EFFECTS ON INTERACTIVE ELEMENTS
        ======================================== */
        const interactiveElements = document.querySelectorAll(
            '.nav-arrow, .indicator-dot, .contact-form button, .gallery-item, .category-card'
        );

        interactiveElements.forEach(el => {
            el.addEventListener('mouseenter', () => {
                cursor.style.transform = 'translate(-50%, -50%) rotate(-45deg) scale(1.2)';
            });
            
            el.addEventListener('mouseleave', () => {
                cursor.style.transform = 'translate(-50%, -50%) rotate(-45deg) scale(1)';
            });
        });

        /* ========================================
           FORM SUBMISSION HANDLER
        ======================================== */
        const contactForm = document.querySelector('.contact-form');
        if (contactForm) {
            contactForm.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('Thank you for your message! We will get back to you soon.');
                contactForm.reset();
            });
        }

        /* ========================================
           INITIALIZATION COMPLETE
           Log ready state
        ======================================== */
        console.log('Interactive 3D Book initialized successfully');
        console.log('Navigation: Arrow keys, mouse drag, or click arrows');
        console.log('Total pages:', totalPages);
    </script>
</body>
</html>